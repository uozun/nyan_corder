<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>にゃんコーダ</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- ヘッダー -->
  <header class="header">
    <img src="nyan-code-logo-coder.png" alt="NYAN CODE" class="header-logo">
  </header>

  <div class="background"></div> 
  <div class="app">

    <!-- 進捗足跡 -->
    <div class="progress-area">
      <div class="paw-track">
        <img src="img/icon/footmark.png" alt="paw" class="paw" />
        <img src="img/icon/footmark.png" alt="paw" class="paw" />
        <img src="img/icon/footmark.png" alt="paw" class="paw" />
        <img src="img/icon/footmark.png" alt="paw" class="paw" />
        <img src="img/icon/footmark.png" alt="paw" class="paw" />
        <img src="img/icon/footmark.png" alt="paw" class="paw" />
        <img src="img/icon/footmark.png" alt="paw" class="paw" />
        <img src="img/icon/footmark.png" alt="paw" class="paw" />
        <img src="img/icon/footmark.png" alt="paw" class="paw" />
        <img src="img/icon/footmark.png" alt="paw" class="paw" />
      </div>
    </div>

    <!-- 猫たち -->
    <div class="cat-area">
      <div class="cat-block" id="enko-block">
        <img src="img/cat/cats_sleep_closed_enko.png" alt="enko" class="cat-img" id="enko-img" data-state="sleep_closed" />
        <div class="cat-label">enko</div>
      </div>
      <div class="cat-block" id="deko-block">
        <img src="img/cat/cats_sleep_closed_deko.png" alt="deko" class="cat-img" id="deko-img" data-state="sleep_closed" />
        <div class="cat-label">deko</div>
      </div>
    </div>

    <!-- アイコン列 -->
    <div class="icon-area">
      <button class="icon-button">
        <img src="img/icon/folder.png" alt="folder" class="icon-img" />
      </button>
      <button class="icon-button">
        <img src="img/icon/bell.png" alt="bell" class="icon-img" />
      </button>
      <button class="icon-button">
        <img src="img/icon/key.png" alt="key" class="icon-img" />
      </button>
    </div>

    <!-- 野良猫nego（右下） -->
    <div class="nego-area">
      <div class="nego-block">
        <img src="img/cat/nego.png" alt="nego" class="nego-img" id="nego-button" />
        <div class="nego-label">nego</div>
      </div>
    </div>

    <!-- ★ エンコード用モーダル ★ -->
    <div id="encode-modal" class="file-modal hidden">
    
      <div class="file-dialog">
        <div class="file-header">
          <span>📁 キャリーに入れる</span>
          <button class="file-close">×</button>
        </div>
        <div class="file-body">
          <div class="file-section">
            <button id="encode-select-btn" class="file-select-btn">
              フォルダを選ぶ 📂
            </button>
          </div>
          <div class="file-section">
            <input type="text" id="encode-filename" class="file-password-input" placeholder="ファイル名（空欄OK）🏷️" />
          </div>
          <div class="file-section">
            <div class="password-container">
              <input type="password" id="encode-password" class="file-password-input" placeholder="鍵ワードを入力してね" />
              <button type="button" class="password-toggle" data-target="encode-password">🔒</button>
            </div>
            <label class="checkbox-label">
              <input type="checkbox" id="encode-no-password" />
              <span>鍵ワードなし</span>
            </label>
          </div>
          <button id="encode-ok-btn" class="file-ok-btn" disabled>
            キャリーに入れる 🐾
          </button>
        </div>
      </div>
    </div>

    <!-- ★ デコード用モーダル ★ -->
    <div id="decode-modal" class="file-modal hidden">
      <div class="file-dialog">
        <div class="file-header">
          <span>🔓 キャリーから出す</span>
          <button class="file-close">×</button>
        </div>
        <div class="file-body">
          <div class="file-section">
            <button id="decode-select-btn" class="file-select-btn">
              .nyanまたは.zipファイルを選ぶ 📦
            </button>
          </div>
          <div class="file-section">
            <div class="password-container">
              <input type="password" id="decode-password" class="file-password-input" placeholder="鍵ワードを入力してね" />
              <button type="button" class="password-toggle" data-target="decode-password">🔒</button>
            </div>
            <label class="checkbox-label">
              <input type="checkbox" id="decode-no-password" />
              <span>鍵ワードなし</span>
            </label>
          </div>
          <button id="decode-ok-btn" class="file-ok-btn" disabled>
            キャリーから出す 🐾
          </button>
        </div>
      </div>
    </div>

    <!-- ★ エラーモーダル（デコード失敗時） ★ -->
    <div id="error-modal" class="error-modal hidden">
      <div class="error-dialog">
        <button class="error-close">×</button>
        <div class="error-body">
          <p class="error-message">うまくいかなかったにゃ…</p>
        </div>
      </div>
    </div>

    <!-- ★ インフォモーダル（お知らせ用） ★ -->
    <div id="info-modal" class="info-modal hidden">
      <div class="info-dialog">
        <button class="info-close">×</button>
        <div class="info-body">
          <p class="info-message" id="info-message-text"><span class="red">enko</span> か <span class="red">deko</span> を選んでね</p>
        </div>
      </div>
    </div>

    <!-- メッセージ変換モーダル（既存） -->
    <div id="memo-modal" class="memo-modal hidden">
      <div class="memo-dialog">
        <div class="memo-header">
          <span>nego</span>
          <button id="memo-close" class="memo-close">×</button>
        </div>

        <div class="memo-mode">
          <button id="memo-mode-encode" class="memo-mode-btn active">
            テキスト → ね語🐾
          </button>
          <button id="memo-mode-decode" class="memo-mode-btn">
            ね語🐾 → テキスト
          </button>
        </div>

        <div class="memo-body">
          <textarea id="memo-input"
            class="memo-textarea"
            placeholder="ここに変換したいテキストを入れてね"></textarea>
          <div class="memo-sub-buttons">
            <button id="memo-clear" class="memo-sub-btn">クリア</button>
          </div>  

          <button id="memo-run" class="memo-run-button">
            変換する
          </button>

          <textarea id="memo-output"
            class="memo-textarea memo-output"
            readonly
            placeholder=""></textarea>
        </div>
        <div class="memo-sub-buttons">
          <button id="memo-copy" class="memo-copy-btn">コピー</button>
        </div>

      </div>
    </div>

  </div> <!-- .app -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="nyancoder-core.js"></script>
  <script src="encode.js"></script>
  <script src="decode.js"></script>
  <script src="ui.js"></script>
  <script src="memo.js"></script>
</body>
</html>